include _loading_init

.timeline(infinite-scroll='tweets.nextPage()', infinite-scroll-disabled='tweets.busy', infinite-scroll-distance='1')
  .timeline__post(ng-repeat='tweet in tweets.items | orderBy: "id_str": "DESC"')
    .timeline__post--header
      .timeline__post--header--info
        .timeline__post--header--link
          span.timeline__post--header--user(twitter-id-str="{{tweet.user.id_str}}", show-tweet="show-tweet")
            {{tweet.user.screen_name}}
          span.timeline__post--header--rt_icon(ng-if="tweet.retweeted_status")
            i.fa.fa-retweet
          a.timeline__post--header--rt_source(twitter-id-str="{{tweet.retweeted_status.user.id_str}}", show-tweet="show-tweet")
            {{tweet.retweeted_status.user.screen_name}}
          followable(ng-if='!tweet.followStatus', list-id-str="{{listIdStr}}", tweet="{{tweet}}", follow-status="tweet.followStatus")
      .timeline__post--header--time
        a(href="https://{{tweet.sourceUrl}}", target="_blank")
          {{tweet.time}}
    .timeline__post--icon
      img.fade(ng-src="{{tweet.user.profile_image_url}}", img-preload="img-preload", show-tweet="show-tweet", twitter-id-str="{{tweet.user.id_str}}")
    .timeline__post--image(ng-repeat='picUrl in tweet.picUrlList')
      img.fade(ng-if="!tweet.video_url", ng-src="{{picUrl}}", img-preload="img-preload", zoom-image="zoom-image", data-img-src="{{picUrl}}")
      video(ng-if="tweet.video_url", autoplay, loop)
        source(ng-src="{{tweet.video_url | trusted}}", type="video/mp4")
    .timeline__post--text(ng-if="!tweet.retweeted_status", ng-bind-html='tweet.text | newlines')
    .timeline__post--blockquote(ng-if="tweet.retweeted_status")
      p
        a(twitter-id-str="{{tweet.retweeted_status.user.id_str}}", show-tweet="show-tweet")
          {{tweet.retweeted_status.user.screen_name}}
      blockquote
        .timeline__post--text(ng-bind-html='tweet.text | newlines')
    .timeline__post--footer
      .timeline__post--footer--contents
        .timeline__post--footer--contents--controls
          i.fa.fa-retweet.icon-retweet(retweet-num="tweet.retweetNum", retweeted='tweet.retweeted', tweet-id-str='{{tweet.tweetIdStr}}', retweetable='retweetable')  {{tweet.retweetNum}}
          i.fa.fa-star.icon-star(fav-num="tweet.favNum", favorited='tweet.favorited', tweet-id-str='{{tweet.tweetIdStr}}', favoritable='favoritable')  {{tweet.favNum}}
          a(href='{{tweet.extended_entities.media[0].media_url}}:orig?.jpg', download='download')
            i.fa.fa-download

  .loading-bar
    include _loading_fin